- activities = investigation.activities
.activities_container
  .activity_list_header 
    %span.investigation_name
      = investigation.name + " - " 
    Activities
  .include_Checkbox 
    Include
  %div
    %table.activity_list
      %tbody
        - activities.each do|activity|
          - checkbox_checked = (material.class == ::Investigation)? true : (activity.id == material.id)? true : false
          %tr
            %td.check_box
              = check_box_tag 'activity_id[]',activity.id,checkbox_checked, :id => 'activity_' + activity.id.to_s, :onclick=>"checkActivityToAssign(this)"
            %td
              .activity_name
                = activity.name
              .activity_description
                = activity.description
                %span.clazz_count{:id=>"activity_clazz_count_#{activity.id}"}
                  - if(activity.offerings.count == 0)
                    Not used in any class.
                  - elsif(activity.offerings.count == 1)
                    Used in 1 class.
                  - else
                    Used in #{activity.offerings.count} classes.
            %td.preview
              = link_to "Preview",run_url_for(activity,{}),:class=>"button"
            %td.share_activity
              %a{:class=>"button share_Button",:id=>"shareExpandCollapse_#{activity.id}",:href=>"javascript:void(0)",:onclick=>"showShareoptions(#{activity.id},'Act')"}Share &#9660;
              .sharing{:id=>"share_Act#{activity.id}",:style=>"display:none"}
                = render :partial => '/browse/share', :locals => {:material_url => browse_activity_url(activity),:material_title=>activity.name}